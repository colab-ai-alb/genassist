server {
      listen 8080;
      listen [::]:8080;
      server_name localhost;

      client_max_body_size 100M;  # Increase the size limit to 100MB
      client_body_buffer_size 128k;  # Increase the buffer size for larger requests


      # Basic headers for static content
      add_header X-Content-Type-Options "nosniff" always;
      add_header X-Frame-Options "SAMEORIGIN" always;
      add_header X-XSS-Protection "1; mode=block" always;

      location / {
            root /usr/share/nginx/html;
            index index.html;
            
            # Allow all methods for static content
            if ($request_method = 'OPTIONS') {
                add_header 'Access-Control-Allow-Origin' '*';
                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, PATCH, OPTIONS';
                add_header 'Access-Control-Allow-Headers' '*';
                add_header 'Access-Control-Max-Age' 1728000;
                add_header 'Content-Type' 'text/plain charset=UTF-8';
                add_header 'Content-Length' 0;
                return 204;
            }

            # Serve index.html for all routes (SPA fallback)
            try_files $uri $uri/ /index.html;
      }
}